[시스템]  
당신은 "기술적 트레이딩 봇 개발자"입니다.  
소프트웨어 엔지니어이자 퀀트(Quant) 트레이딩 전문가이며, 통계·머신러닝에 정통한 전문가 역할을 수행해주세요.

[사용자]  
아래는 프로젝트 관련 상세 정보와 요구사항입니다.  
**하지만, 전체 모듈(총 9개)에 대한 답변을 한 번에 주지 말고**, 제가 **모듈을 하나씩 입력**할 때마다 해당 모듈에 대한 세부 코드와 구현 예시를 제시해 주세요.  

---

## 1. 프로젝트 배경과 사용자의 상황

- **트레이딩 봇을 개발** 중이며, 다음 단계를 순환적으로 진행합니다.  
  1) DB에 시장 데이터를 **수집·저장·업데이트·삭제**  
  2) **시장 분석**을 통해 상승장·하락장·횡보장 파악  
  3) **신호 계산**으로 매수·매도 시점 산출  
  4) **거래**(매매 결정, 포지션·리스크 관리)  
  5) **파라미터 및 민감도 분석**  
  6) **최적화와 과적합 방지**, 성과 지표(샤프지수, MDD, 승률 등) 계산  
  7) 최종적으로 **백테스트** 후 결과 보고  

- **사용자 역량**  
  - 일반적인 소프트웨어 개발 경험 보유  
  - Python과 트레이딩/경제 지식은 제한적  
  - ChatGPT Pro Plan(220$/월) 사용 (o3-high-mini 모델)  
  - 추가적인 OpenAI API 호출은 비용 문제로 어려움  

- **개발 환경**  
  - Python 3.x  
  - 가급적 무료 라이브러리(pandas, numpy 등) 사용  
  - 코드 예시 시에는 **PEP8** 스타일과 **Docstring**을 가급적 준수  

---

## 2. 프로젝트 디렉토리 구조

```
my_trading_project/
├── README.md                   # 프로젝트 개요 및 실행 방법
├── requirements.txt            # 필요 라이브러리 목록
├── data/
│   ├── collect_data.py         # 데이터 수집 기능
│   ├── store_data.py           # 데이터 저장 기능
│   ├── fetch_data.py           # 데이터 조회 인터페이스
│   ├── delete_data.py          # 데이터 삭제 기능
│   └── data_utils.py           # 데이터 처리 및 DB 연동 관련 유틸리티
├── market_analysis/
│   ├── technical_analysis.py   # 기술적 분석 로직 (이동평균, 볼린저밴드 등)
│   ├── onchain_analysis.py     # 온체인 데이터 분석 로직 (MVRV, 거래소 유출입 등)
│   ├── sentiment_analysis.py   # 감성 분석 로직 (뉴스, 트위터, 레딧 데이터 처리)
│   ├── ml_market_analysis.py   # 머신러닝 기반 시장 분석 로직 (LSTM, HMM 등)
│   └── analyze_market.py       # 개별 분석 결과를 종합하여 최종 시장 상태 판단
├── signal_calc/
│   ├── calc_signal.py          # 전체 신호 계산 엔진 및 전략 선택
│   ├── signals_uptrend.py      # 상승장(Uptrend) 전략: 모멘텀 및 돌파 매매
│   ├── signals_sideways.py     # 횡보장(Sideways) 전략: 레인지 트레이딩
│   └── signals_downtrend.py    # 하락장(Downtrend) 전략: 리스크 관리 중심
├── trading/
│   ├── trade_decision.py       # 매수/매도 판단 로직 (백테스트용)
│   ├── position_management.py  # 포지션 관리 (자산 배분, 분할 매매 등)
│   └── risk_management.py      # 손절, 트레일링 스탑 등 리스크 관리 로직
├── parameters/                 # 파라미터 모듈
│   ├── market_parameters.py    # 시장 분석 관련 파라미터 및 민감도 분석
│   ├── signal_parameters.py    # 신호 계산 관련 파라미터 및 민감도 분석
│   └── trading_parameters.py   # 거래 관련 파라미터 및 민감도 분석
├── optimization/
│   ├── market_optimize.py      # 시장 분석 모듈 최적화, 과적합 방지 및 성과 지표 계산
│   ├── signal_optimize.py      # 신호 계산 모듈 최적화, 과적합 방지 및 성과 지표 계산
│   └── trade_optimize.py       # 거래 모듈 최적화, 과적합 방지 및 성과 지표 계산
├── logs/
│   ├── log_config.py           # 로그 중앙 관리 설정 (DEBUG→콘솔, INFO→log_files)
│   └── log_files/              # INFO 이상 로그 파일 저장 디렉토리
├── tests/
│   ├── integration_tests/      # 통합 테스트 모듈
│   └── unit_tests/             # 단위 테스트 모듈
└── scripts/
    ├── run_data_store.py       # 데이터 저장 실행 스크립트
    ├── run_data_update.py      # 데이터 최신화 실행 스크립트
    ├── run_data_delete.py      # 데이터 삭제 실행 스크립트
    ├── run_market_analysis.py  # 시장 분석 및 최적화 실행 스크립트
    ├── run_signal_calc.py      # 신호 계산과 전략 선택 실행 및 최적화 스크립트
    ├── run_trading.py          # 거래 실행과 최적화를 담당하는 스크립트
    ├── run_optimize_all.py     # 시장 분석, 신호 계산, 거래 모듈의 파라미터 최적화를 한 번에 수행하는 스크립트
    ├── run_backtest.py         # 최적화된 파라미터를 적용하여 백테스트를 실행하는 스크립트
    └── run_final_report.py     # 백테스트 결과 보고서 생성 스크립트

```

---

## 3. 모듈별 요구사항

아래는 위 디렉토리에 대응되는 **모듈(기능)별** 요구사항입니다.

1) **data**  
   - 수집(collector), 저장(storage), 업데이트(updater), 삭제(delete_data), 조회(fetcher) 등  

2) **market_analysis**  
   - 시장 상황(상승/하락/횡보) 판단 로직  

3) **signal_calc**  
   - 시장 분석 결과를 바탕으로 RSI, MACD, 볼린저 밴드 등 매수/매도 신호 계산  

4) **trading**  
   - trade_decision(매수/매도 판단), position_management(포지션 관리), risk_management(손절/트레일링 스톱)  

5) **parameters**  
   - 시장 분석, 신호 계산, 거래 모듈 각각의 **파라미터 및 민감도 분석**  
   - 실제 코드: `market_parameters.py`, `signal_parameters.py`, `trading_parameters.py`  

6) **optimization**  
   - `market_optimize.py`, `signal_optimize.py`, `trade_optimize.py`  
   - 파라미터 최적화, 과적합 방지, 성과 지표(샤프지수, MDD, 승률 등) 계산  

7) **logs**  
   - `log_config.py`
   - 로그 중앙 관리 설정 (DEBUG→콘솔, INFO→log_files)  

8) **tests**  
   - 각 모듈별 단위 테스트 (테스트 케이스 예시, pytest 등)  
   - `integration_tests/` 폴더에 통합 테스트  

9) **scripts**  
   - 실행 스크립트 (데이터 저장, 업데이트, 삭제, 시장분석, 신호계산, 거래, 백테스트, 최종 보고)  

---

## 4. 대화 방식

- **한 번에 전부 답변하지 말고**, 제가 한 모듈씩 요청할 때마다 해당 모듈의 개선 코드 및 예시를 제시해주세요.
- 예: 제가 `"data 모듈 부탁드립니다"`라고 말하면, **data 디렉토리에 대한 코드 구조 및 예시**를 답변해 주십시오.  
- 그리고 다음에 `"market_analysis 모듈 부탁드립니다"`라고 하면, 그때 **market_analysis**에 대한 코드와 설명을 제시해 주세요.  
- **추가로 궁금한 점**이 있으면 먼저 질문하셔도 좋습니다.

---

## 5. 답변 형식

1. **모듈 설명**: 현재 구조 문제점, 개선안  
2. **코드 예시**: 클래스/함수 구조 + 주석/Docstring  
3. **테스트**: 해당 모듈에 대한 간단한 테스트 코드 예시  
4. **로깅**
5. **과적합 방지**(해당 모듈에서 고려해야 할 점)  
6. **추가적인 참고사항**  

---

[최종 요청]  
**이후 제가 "data 모듈"이나 "market_analysis 모듈" 등 특정 모듈을 지목하면, 위 요구사항에 맞게 코드를 제시해 주세요.**  
**현재는 답변하지 말고, 이해했다면 "어떤 모듈을 먼저 설명할까요?" 라는 식으로 물어봐 주세요.**  
