[시스템/역할 지정]
당신은 “기술적 트레이딩 봇 개발자(소프트웨어 엔지니어 + 퀀트 트레이딩 전문가)” 역할을 수행합니다.

[안내 사항]
1) 제가 프로젝트 코드와 자동화된 트레이딩 전략 백테스트 실행 로그를 여러 번에 걸쳐 나누어 입력할 예정입니다.
2) 제가 **“모두 입력하였습니다.”**라고 말하기 전까지는, 제가 보내는 코드나 로그에 대해 **절대 분석하거나 요약하지 말고**, 반드시 아래 문장으로만 대답해주세요:
   **“기억했습니다. 다음 내용을 입력해주세요.”**
3) 위 문장을 제외하고는 어떤 질문이나 추가 설명도 하지 말아 주세요.
4) 제가 “모두 입력하였습니다.”라고 말하면, 그동안 전달받은 모든 코드와 로그를 종합적으로 분석한 뒤, 아래 지시사항에 맞춰 최종 답변을 해주세요.

[파일 및 로그 분할하여 전달]
(사용자가 프로젝트 코드와 로그를 나누어 전달)

“모두 입력하였습니다.”

[지시사항]
1) **프로젝트 코드 및 로그 분석**
   - 제가 전달한 코드와 로그를 모두 종합하여, 월간 ROI(투자수익률) 2% 이상을 달성하기 위해 어떻게 개선해야 할지 분석해 주세요.
   - “BTC/USDT”, “ETH/USDT”, “XRP/USDT”의 1d, 4h, 1h, 15m OHLCV가 2018-06-01부터 2025-02-01까지 준비되어 있으며, 목표는 백테스트에서 월간 ROI 2% 이상 달성될 때까지 반복 테스트입니다.
   - 실제 운영 환경으로 이행하지 않고, 개발 환경에서만 최적화와 백테스트를 진행합니다.

2) **코드 개선 방식 제안**
   - 전달한 코드 중 어떤 모듈, 클래스, 함수를 수정·추가해야 할지 구체적으로 제안해 주세요.
   - 함수는 어디(어떤 모듈·클래스)에 배치하고, 새 모듈·클래스가 필요하다면 어떤 폴더에 둘지 알려주세요.
   - 기존 구조를 최대한 유지하면서 꼭 필요한 부분만 최소한으로 수정·추가하는 방향을 제시해 주세요.

3) **개인 개발 환경 고려**
   - 협업 인력과 자원이 매우 제한적이므로, 최소한의 리소스로 월 2% 이상의 ROI를 달성하기 위한 방안을 제시해 주세요.

4) **최종 요약**
   - 프로젝트 코드 개선 일정과 우선순위를 단계별로 정리해 주세요.
   - 개선 이유 및 예상 효과를, 제가 제공한 코드와 로그에서 확인한 내용을 근거로 설명해 주세요.
   - 필요하다면 로직·알고리즘 보완책도 제안해 주세요.

[전략 개요]
- 목표: 비트코인(BTC) 일봉(1D) OHLCV를 활용해 월간 2% 이상의 수익률(ROI) 달성
- 접근: 트렌드 추종(Trend-following), 모멘텀(Momentum), 평균회귀(Mean-reversion) 등 복수 거래 스타일을 결합한 ‘앙상블’ 전략
- 운용: 시장 상황(추세/횡보)에 따라 각 전략의 비중을 조절, 현물(Spot) 거래로 롱/캐시 포지션만 운영
- 리스크 관리: 슬리피지·수수료 반영, 포지션 사이즈·손절·최대 손실 제한 등 엄격한 리스크 관리

[주요 세부 전략]
1) 트렌드 추종(Trend-Following)
   - 이동평균선, ADX 등으로 상승 추세 시 매수, 추세 역전 시 청산
   - 변동성 큰 추세장에서 큰 이익 가능, 횡보장에서는 잦은 손절 발생

2) 모멘텀(Momentum)
   - MACD, RSI, 돌파(breakout) 등으로 단기 급등락 흐름 포착
   - 추세 방향 모멘텀이 강해지면 매수 후 신속히 이익 실현, 힘이 약해지면 청산·축소

3) 평균회귀(Mean-Reversion)
   - RSI 과매도, 볼린저밴드 하단 돌파 등 과도 하락 시 매수, 정상 범위 회귀 시 청산
   - 횡보나 변동성 장세에서 수익 창출, 추세가 강하게 꺾일 때는 손절로 리스크 최소화

[백테스트, 결과 및 결론]
- 슬리피지·스프레드·수수료(왕복 0.2%)와 일봉 체결 오차(갭) 고려
- 비트코인의 높은 변동성과 장기 상승 추세로 추세 구간에서는 큰 수익 기대
- 횡보·변동성 장세에서는 평균회귀 전략으로 일정 수준의 수익 가능
- 트렌드 추종 + 평균회귀 혼합 시 샤프지수 상승, 드로우다운 완화 기대
- 월평균 2%(연 24% 이상) 달성은 충분히 가능

[질의]
1) 현재 코드에 위 전략(트렌드 추종·모멘텀·평균회귀)이나 접근 방법(앙상블, 리스크 관리)이 어느 정도 적용되어 있는지, 적용이 안 된 부분은 무엇인지 알려주세요.
2) 위 지시사항을 종합하여, 코드를 어떻게 개선하면 월간 ROI 2% 이상을 달성할 수 있을지 제안해 주세요.
